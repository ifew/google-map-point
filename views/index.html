<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Map Analytics</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <!-- Left Sidebar -->
    <div id="sidebar" class="sidebar">
        <div class="sidebar-toggle" id="sidebarToggle">
            <span>‚â°</span>
        </div>
        
        <div class="sidebar-content">
            <!-- Tab Navigation -->
            <div class="tab-nav">
                <button class="tab-btn active" data-tab="summary">Property Summary</button>
                <button class="tab-btn" data-tab="list">Property List</button>
                <button class="tab-btn" data-tab="analytics">Analytics</button>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Property Summary Tab -->
                <div id="summary-tab" class="tab-panel active">
                    <h3>Current Properties</h3>
                    <div class="summary-stats">
                        <div class="stat-item">
                            <span class="stat-label">Total Properties</span>
                            <span class="stat-value" id="sidebar-total-count">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Average Distance</span>
                            <span class="stat-value" id="sidebar-avg-distance">0 km</span>
                        </div>
                    </div>
                    
                    <h4>Property Types</h4>
                    <div id="sidebar-property-types" class="info-boxes">
                        <!-- Dynamic property type counts -->
                    </div>
                    
                    <h4>Building Status</h4>
                    <div id="sidebar-building-status" class="info-boxes">
                        <!-- Dynamic building status counts -->
                    </div>
                </div>

                <!-- Property List Tab -->
                <div id="list-tab" class="tab-panel">
                    <h3>Property List</h3>
                    <div class="search-box">
                        <input type="text" id="sidebar-search" placeholder="Search properties..." class="sidebar-search-input">
                    </div>
                    <div id="sidebar-property-list" class="property-list">
                        <!-- Dynamic property list -->
                    </div>
                </div>

                <!-- Analytics Tab -->
                <div id="analytics-tab" class="tab-panel">
                    <h3>Area Analytics</h3>
                    <div id="sidebar-analytics" class="analytics-content">
                        <div class="info-box">
                            <div class="color-indicator" style="background: #007bff;"></div>
                            <span>Within 1km</span>
                            <span class="count" id="within-1km">0</span>
                        </div>
                        <div class="info-box">
                            <div class="color-indicator" style="background: #28a745;"></div>
                            <span>Within 2km</span>
                            <span class="count" id="within-2km">0</span>
                        </div>
                        <div class="info-box">
                            <div class="color-indicator" style="background: #ffc107;"></div>
                            <span>Within 5km</span>
                            <span class="count" id="within-5km">0</span>
                        </div>
                        <div class="info-box">
                            <div class="color-indicator" style="background: #dc3545;"></div>
                            <span>Beyond 5km</span>
                            <span class="count" id="beyond-5km">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Top Right Filters -->
    <div id="filter-container">
        <div class="filter-group">
            <div class="filter-box">
                <label>Location</label>
                <select id="location-filter" class="filter-select">
                    <option value="Ploenchit">Ploenchit</option>
                </select>
            </div>
            
            <div class="filter-box">
                <label>Properties Type</label>
                <div class="multi-select" id="properties-filter">
                    <div class="select-display">Condo</div>
                    <div class="dropdown-content"></div>
                </div>
            </div>
            
            <div class="filter-box">
                <label>Building Status</label>
                <div class="multi-select" id="status-filter">
                    <div class="select-display">Ready to Move In</div>
                    <div class="dropdown-content"></div>
                </div>
            </div>
            
            <div class="filter-box">
                <label>Keyword Search</label>
                <input type="text" id="keyword-search" placeholder="Type to search..." class="keyword-input">
                <div id="keyword-results" class="keyword-dropdown"></div>
            </div>
        </div>
    </div>

    <!-- Map Container -->
    <div id="map"></div>
    
    <!-- Toast Notification -->
    <div id="view-map-toast" class="view-map-toast">
        <span id="toast-message">üìç Centering property on map...</span>
    </div>
    
    <!-- Property Listings Section -->
    <div id="property-listings-section">
        <div class="listings-container">
            <div class="listings-header">
                <h2>Property Listings</h2>
                <div class="listings-stats">
                    <span id="total-properties">0 properties found</span>
                </div>
            </div>
            
            <div class="circular-listings-area">
                <div id="property-grid" class="property-grid">
                    <!-- Property cards will be dynamically generated here -->
                </div>
                
                <div class="loading-indicator" id="loading-indicator" style="display: none;">
                    <div class="spinner"></div>
                    <p>Loading properties...</p>
                </div>
                
                <div class="no-results" id="no-results" style="display: none;">
                    <p>No properties found matching your criteria.</p>
                </div>
            </div>
        </div>
    </div>
    
    <script src="/js/app.js"></script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key={{GMAP_APIKEY}}&callback=initMap">
    </script>
</body>
</html>